!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("prop-types"),require("jquery"),require("react-dom")):"function"==typeof define&&define.amd?define(["react","prop-types","jquery","react-dom"],t):"object"==typeof exports?exports.SubItems=t(require("react"),require("prop-types"),require("jquery"),require("react-dom")):(e.eZ=e.eZ||{},e.eZ.modules=e.eZ.modules||{},e.eZ.modules.SubItems=t(e.React,e.PropTypes,e.jQuery,e.ReactDOM))}("undefined"!=typeof self?self:this,function(e,t,i,n){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=19)}([function(t,i){t.exports=e},function(e,i){e.exports=t},function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(1),o=i.n(s);const r=e=>{const t=e.customPath?e.customPath:"/bundles/ezplatformadminui/img/ez-icons.svg#".concat(e.name);let i="ez-icon";return e.extraClasses&&(i="".concat(i," ").concat(e.extraClasses)),a.a.createElement("svg",{className:i},a.a.createElement("use",{xlinkHref:t}))};r.propTypes={extraClasses:o.a.string.isRequired,name:o.a.string,customPath:o.a.string},r.defaultProps={customPath:null,name:null},t.a=r},function(e,t,i){"use strict";t.a=(({token:e,siteaccess:t})=>({headers:{"X-Siteaccess":t,"X-CSRF-Token":e},mode:"same-origin",credentials:"same-origin"}));const n=e=>{if(!e.ok)throw Error(e.statusText);return e};t.b=n;t.c=(e=>n(e).json());t.d=(e=>n(e).status)},,function(e,t,i){"use strict";const n=e=>{let t;if("object"!=typeof e)return e;if(!e)return e;if("[object Array]"===Object.prototype.toString.apply(e)){t=[];for(let i=0;i<e.length;i++)t[i]=n(e[i]);return t}t={};for(let i in e)e.hasOwnProperty(i)&&(t[i]=n(e[i]));return t};t.a=n},,,,,function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(11),o=i.n(s),r=i(1),l=i.n(r),c=i(2);function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){u(e,t,i[t])})}return e}function u(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const m="ezs-non-scrollable",p="modal-open",h={backdrop:"static",keyboard:!0},b={small:"modal-sm",medium:"",large:"modal-lg"};class g extends n.Component{constructor(e){super(e),this._refModal=null,this.setModalRef=this.setModalRef.bind(this),this.onKeyUp=this.onKeyUp.bind(this),this.state={isVisible:e.isVisible,isLoading:e.isLoading}}componentDidMount(){const{isVisible:e}=this.state;e&&(o()(this._refModal).modal(d({},h,{show:e,focus:this.props.hasFocus})),this.attachModalEventHandlers())}componentDidUpdate(){const{isVisible:e}=this.state;o()(this._refModal).modal(d({},h,{show:e,focus:this.props.hasFocus})),e&&this.attachModalEventHandlers()}componentWillUnmount(){o()(this._refModal).modal("hide"),document.body.classList.remove(p,m)}UNSAFE_componentWillReceiveProps({isVisible:e,onConfigIframeLoad:t,isLoading:i}){this.setState(n=>d({},n,{isVisible:e,onConfigIframeLoad:t,isLoading:i}))}attachModalEventHandlers(){const e=o()(this._refModal);e.on("keyup",this.onKeyUp),e.one("hidden.bs.modal",this.props.onClose)}onKeyUp(e){const{originalEvent:t}=e;t&&(27===t.which||27===t.keyCode)&&this.props.onClose()}setModalRef(e){this._refModal=e}renderHeader(){const e=Translator.trans("popup.close.label",{},"universal_discovery_widget");return a.a.createElement("div",{className:"modal-header c-popup__header"},this.renderHeadline(),a.a.createElement("button",{type:"button",className:"close c-popup__btn--close","data-dismiss":"modal","aria-label":e,onClick:this.props.onClose},a.a.createElement(c.a,{name:"discard",extraClasses:"ez-icon--medium"})))}renderHeadline(){const{title:e}=this.props;return e?a.a.createElement("h3",{className:"modal-title c-popup__headline",title:this.props.title},a.a.createElement("span",{className:"c-popup__title"},this.props.title),this.renderSubtitle()):null}renderSubtitle(){const{subtitle:e}=this.props;return e?a.a.createElement("span",{className:"c-popup__subtitle"},e):null}renderFooter(){const{footerChildren:e}=this.props;if(e)return a.a.createElement("div",{className:"modal-footer c-popup__footer"},e)}render(){const{isVisible:e}=this.state,{additionalClasses:t,size:i,noHeader:n}=this.props,s={className:"c-popup modal fade",ref:this.setModalRef,tabIndex:this.props.hasFocus?-1:void 0};return document.body.classList.toggle(p,e),document.body.classList.toggle(m,e),t&&(s.className="".concat(s.className," ").concat(t)),n&&(s.className="".concat(s.className," c-popup--no-header")),a.a.createElement("div",s,a.a.createElement("div",{className:"modal-dialog c-popup__dialog ".concat(b[i]),role:"dialog"},a.a.createElement("div",{className:"modal-content c-popup__content"},this.renderHeader(),a.a.createElement("div",{className:"modal-body c-popup__body"},this.props.children),this.renderFooter())))}}g.propTypes={isVisible:l.a.bool,isLoading:l.a.bool,onClose:l.a.func.isRequired,onConfigIframeLoad:l.a.func,children:l.a.element.isRequired,title:l.a.string,subtitle:l.a.string,hasFocus:l.a.bool,additionalClasses:l.a.string,footerChildren:l.a.element,size:l.a.string,noHeader:l.a.bool},g.defaultProps={isVisible:!1,isLoading:!0,hasFocus:!0,size:"large",noHeader:!1,onConfigIframeLoad:()=>{}},t.a=g},function(e,t){e.exports=i},,,,,function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(1),o=i.n(s),r=i(24),l=i(25);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function d(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const u="ContentName",m="DateModified",p="LocationPriority",h={[u]:"name",[m]:"date",[p]:"priority"},b="sub-items_columns-visibility",g={modified:!0,contentType:!0,priority:!0,translations:!0},f="c-table-view__cell",y="".concat(f," ").concat(f,"--head"),C="".concat(f," ").concat(f,"--sortable"),v={name:Translator.trans("items_table.header.name",{},"sub_items"),modified:Translator.trans("items_table.header.modified",{},"sub_items"),contentType:Translator.trans("items_table.header.content_type",{},"sub_items"),priority:Translator.trans("items_table.header.priority",{},"sub_items"),translations:Translator.trans("items_table.header.translations",{},"sub_items")};t.b=v;class _ extends n.Component{constructor(e){super(e),this.sortByName=this.sortByName.bind(this),this.sortByDate=this.sortByDate.bind(this),this.sortByPriority=this.sortByPriority.bind(this),this.renderItem=this.renderItem.bind(this),this.selectAll=this.selectAll.bind(this),this.setColumnsVisibilityInLocalStorage=this.setColumnsVisibilityInLocalStorage.bind(this),this.toggleColumnVisibility=this.toggleColumnVisibility.bind(this),this._refColumnsTogglerButton=Object(n.createRef)(),this.state={columnsVisibility:this.getColumnsVisibilityFromLocalStorage()}}getColumnsVisibilityFromLocalStorage(){const e=localStorage.getItem(b);return e?JSON.parse(e):g}setColumnsVisibilityInLocalStorage(){const e=JSON.stringify(this.state.columnsVisibility);localStorage.setItem(b,e)}sortByName(){const{onSortChange:e}=this.props;e(u)}sortByDate(){const{onSortChange:e}=this.props;e(m)}sortByPriority(){const{onSortChange:e}=this.props;e(p)}selectAll(e){const{toggleAllItemsSelect:t}=this.props;t(e.target.checked)}toggleColumnVisibility(e){this.setState(t=>({columnsVisibility:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){d(e,t,i[t])})}return e}({},t.columnsVisibility,{[e]:!t.columnsVisibility[e]})}),this.setColumnsVisibilityInLocalStorage)}renderItem(e){const{columnsVisibility:t}=this.state,{contentTypesMap:i,handleItemPriorityUpdate:n,handleEditItem:s,generateLink:o,languages:l,onItemSelect:d,selectedLocationsIds:u}=this.props,m=u.has(e.location.id);return a.a.createElement(r.a,c({key:e.location.id},e,{contentTypesMap:i,onItemPriorityUpdate:n,languages:l,handleEditItem:s,generateLink:o,onItemSelect:d,isSelected:m,columnsVisibility:t}))}renderModifiedHeader(){return this.state.columnsVisibility.modified?a.a.createElement("th",{className:"".concat(y," ").concat(f,"--date ").concat(C),onClick:this.sortByDate,tabIndex:"-1"},a.a.createElement("span",{className:"c-table-view__label"},v.modified)):null}renderContentTypeHeader(){return this.state.columnsVisibility.contentType?a.a.createElement("th",{className:y},a.a.createElement("span",{className:"c-table-view__label"},v.contentType)):null}renderPriorityHeader(){return this.state.columnsVisibility.priority?a.a.createElement("th",{className:"".concat(y," ").concat(f,"--priority ").concat(C),onClick:this.sortByPriority,tabIndex:"-1"},a.a.createElement("span",{className:"c-table-view__label"},v.priority)):null}renderTranslationsHeader(){return this.state.columnsVisibility.translations?a.a.createElement("th",{className:"".concat(y)},a.a.createElement("span",{className:"c-table-view__label"},v.translations)):null}renderHead(){const{items:e}=this.props;let t="c-table-view__head";if(!e.length)return null;const{sortClause:i,sortOrder:n}=this.props;if(i){const e="".concat(t,"ascending"===n?"--sort-asc":"--sort-desc"),a="".concat(t,"--sort-by-").concat(h[i]);t="".concat(t," ").concat(e," ").concat(a)}const{columnsVisibility:s}=this.state,{selectedLocationsIds:o}=this.props,r=!!o.size;return a.a.createElement("thead",{className:t},a.a.createElement("tr",{className:"c-table-view__row"},a.a.createElement("th",{className:"".concat(y," ").concat("c-table-view__cell","--checkbox")},a.a.createElement("input",{type:"checkbox",checked:r,onChange:this.selectAll})),a.a.createElement("th",{className:y}),a.a.createElement("th",{className:"".concat(y," ").concat(f,"--name ").concat(C),onClick:this.sortByName,tabIndex:"-1"},a.a.createElement("span",{className:"c-table-view__label"},v.name)),this.renderModifiedHeader(),this.renderContentTypeHeader(),this.renderPriorityHeader(),this.renderTranslationsHeader(),a.a.createElement("th",{className:"".concat(y," ").concat("c-table-view__cell","--actions")},a.a.createElement(l.a,{columnsVisibility:s,toggleColumnVisibility:this.toggleColumnVisibility}))))}render(){const{items:e}=this.props,t=e.map(this.renderItem);return a.a.createElement("div",{className:"c-table-view__wrapper"},a.a.createElement("div",{className:"c-table-view__scroller"},a.a.createElement("table",{className:"c-table-view"},this.renderHead(),a.a.createElement("tbody",{className:"c-table-view__body"},t))))}}t.a=_,_.propTypes={items:o.a.arrayOf(o.a.object).isRequired,contentTypesMap:o.a.object.isRequired,handleItemPriorityUpdate:o.a.func.isRequired,generateLink:o.a.func.isRequired,handleEditItem:o.a.func.isRequired,languages:o.a.object.isRequired,onItemSelect:o.a.func.isRequired,toggleAllItemsSelect:o.a.func.isRequired,selectedLocationsIds:o.a.instanceOf(Set),onSortChange:o.a.func.isRequired,sortClause:o.a.string.isRequired,sortOrder:o.a.string.isRequired}},,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),a=i.n(n),s=i(20),o=i.n(s),r=i(1),l=i.n(r),c=i(21),d=i(23),u=i(10),m=i(29),p=i(30),h=i(32),b=i(2),g=i(5),f=i(33),y=i(34);function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){_(e,t,i[t])})}return e}function _(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const w="ascending",I="descending",P=w;class k extends n.Component{constructor(e){super(e),this.afterPriorityUpdated=this.afterPriorityUpdated.bind(this),this.loadContentItems=this.loadContentItems.bind(this),this.loadContentTypes=this.loadContentTypes.bind(this),this.updateItemsState=this.updateItemsState.bind(this),this.switchView=this.switchView.bind(this),this.handleItemPriorityUpdate=this.handleItemPriorityUpdate.bind(this),this.toggleItemSelection=this.toggleItemSelection.bind(this),this.toggleAllPageItemsSelection=this.toggleAllPageItemsSelection.bind(this),this.onMoveBtnClick=this.onMoveBtnClick.bind(this),this.closeUdw=this.closeUdw.bind(this),this.onUdwConfirm=this.onUdwConfirm.bind(this),this.onDeleteBtnClick=this.onDeleteBtnClick.bind(this),this.closeBulkDeletePopup=this.closeBulkDeletePopup.bind(this),this.onBulkDeletePopupConfirm=this.onBulkDeletePopupConfirm.bind(this),this.afterBulkDelete=this.afterBulkDelete.bind(this),this.changePage=this.changePage.bind(this),this.changeSorting=this.changeSorting.bind(this),this._refListViewWrapper=a.a.createRef(),this.bulkDeleteModalContainer=null,this.udwContainer=null;const t=this.getDefaultSortClause(e.sortClauses);this.state={activeView:e.activeView,activePageItems:e.items,selectedItems:new Map,contentTypesMap:e.contentTypesMap,totalCount:e.totalCount,offset:e.offset,isDuringBulkOperation:!1,isUdwOpened:!1,isBulkDeletePopupVisible:!1,activePageIndex:0,listViewHeight:null,sortClause:t.name,sortOrder:t.order}}componentDidMount(){this.udwContainer=document.getElementById("react-udw"),this.bulkDeleteModalContainer=document.createElement("div"),this.bulkDeleteModalContainer.classList.add("m-sub-items__bulk-delete-modal-container"),document.body.appendChild(this.bulkDeleteModalContainer)}componentDidUpdate(){const{activePageIndex:e,activePageItems:t,totalCount:i}=this.state,{limit:n}=this.props,a=Math.ceil(i/n);e>a-1&&0!==e?this.setState({activePageIndex:a-1}):!t&&this.loadPage(e)}componentWillUnmount(){document.body.removeChild(this.bulkDeleteModalContainer)}getDefaultSortClause(e){const t=Object.keys(e);if(!t.length)return{name:null,order:null};const i=t[0];return{name:i,order:e[i]}}updateListViewHeight(){this.setState(()=>({listViewHeight:this._refListViewWrapper.current.offsetHeight}))}loadPage(e){this.loadLocation(e).then(this.loadContentItems).then(this.loadContentTypes).then(this.updateItemsState).catch(()=>{const e=Translator.trans("page.loading_error.message",{},"sub_items");window.eZ.helpers.notification.showErrorNotification(e)})}loadLocation(e){const{limit:t,loadLocation:i,restInfo:n,parentLocationId:a}=this.props,{sortClause:s,sortOrder:o}=this.state,r={locationId:a,limit:t,sortClauses:{[s]:o},offset:e*t};return new Promise(e=>i(n,r,e))}loadContentItems(e){const{loadContentInfo:t,restInfo:i}=this.props;if(!e||!e.View){const e=Translator.trans("load_content_items.invalid_response_format.error.message",{},"sub_items");throw new Error(e)}const n=e.View.Result.searchHits.searchHit;return new Promise(a=>{const s=n.map(e=>e.value.Location.ContentInfo.Content._id);t(i,s,t=>{const i=e.View.Result.count;a({locations:n,totalCount:i,contentItems:t.View.Result.searchHits.searchHit.map(e=>e.value.Content)})})})}loadContentTypes(e){const t=e.contentItems.map(e=>new Promise(t=>{const i=e.ContentType._href;this.state.contentTypesMap[i]?t({ContentType:this.state.contentTypesMap[i]}):this.props.loadContentType(i,this.props.restInfo,e=>t(e))}));return Promise.all(t).then(t=>(e.contentTypes=t,e))}updateItemsState({locations:e,contentItems:t,totalCount:i,contentTypes:n}){const a=e.map(e=>{const i=e.value.Location,n=t.find(e=>e._id===i.ContentInfo.Content._id);return{location:i,content:n}});this.setState(e=>({activePageItems:a,totalCount:i,contentTypesMap:v({},e.contentTypesMap,this.buildContentTypesMap(n))}))}buildContentTypesMap(e){return e?e.reduce((e,t)=>(e[t.ContentType._href]=t.ContentType,e),{}):{}}updateTotalCountState(e){this.setState(()=>({totalCount:e}))}discardActivePageItems(){this.updateListViewHeight(),this.setState(()=>({activePageItems:null}))}changeSorting(e){this.updateListViewHeight(),this.setState(t=>({sortClause:e,sortOrder:this.getSortOrder(t.sortClause,e,t.sortOrder),activePageItems:null}))}getSortOrder(e,t,i){return t===e?this.getOppositeSortOrder(i):P}getOppositeSortOrder(e){return e===w?I:w}handleItemPriorityUpdate(e){this.props.updateLocationPriority(v({},e,this.props.restInfo),this.afterPriorityUpdated)}afterPriorityUpdated(e){"LocationPriority"!==this.state.sortClause?this.updateItemLocation(e.Location):this.discardActivePageItems()}updateItemLocation(e){this.setState(({activePageItems:t})=>{const i=t.findIndex(t=>t.location.id===e.id);if(-1===i)return null;const n=t[i],a=Object(g.a)(n),s=[...t];return a.location=e,s[i]=a,{activePageItems:s}})}switchView(e){this.setState(()=>({activeView:e}))}toggleItemSelection(e,t){const{selectedItems:i}=this.state,n=new Map(i),a=e.location.id;t?n.set(a,e):n.delete(a),this.setState(()=>({selectedItems:n}))}toggleAllPageItemsSelection(e){const{activePageItems:t}=this.state;if(e)this.selectItems(t);else{const e=t.map(e=>e.location.id),i=new Set(e);this.deselectItems(i)}}selectItems(e){const{selectedItems:t}=this.state,i=e.map(e=>[e.location.id,e]),n=new Map([...t,...i]);this.setState(()=>({selectedItems:n}))}deselectItems(e){const{selectedItems:t}=this.state,i=new Map([...t].filter(([t])=>!e.has(t)));this.setState(()=>({selectedItems:i}))}deselectAllItems(){this.setState(()=>({selectedItems:new Map}))}toggleBulkOperationStatusState(e){this.setState(()=>({isDuringBulkOperation:e}))}onMoveBtnClick(){this.toggleUdw(!0)}bulkMove(e){this.toggleBulkOperationStatusState(!0);const{restInfo:t}=this.props,{selectedItems:i}=this.state,n=[...i.values()].map(({location:e})=>e);Object(y.a)(t,n,e._href,this.afterBulkMove.bind(this,i,e))}afterBulkMove(e,t,i,n){const{totalCount:a}=this.state;if(this.refreshContentTree(),this.updateTotalCountState(a-i.length),this.deselectAllItems(),this.discardActivePageItems(),this.toggleBulkOperationStatusState(!1),n.length){const t=Translator.trans("bulk_move.error.modal.table_title",{itemsCount:n.length},"sub_items"),a=Translator.trans("bulk_move.error.message",{notMovedCount:n.length,totalCount:i.length+n.length},"sub_items"),s={moreInformationLink:Translator.trans("bulk_move.error.more_info",{},"sub_items")};this.handleBulkOperationFailedNotification(e,n,t,a,s)}if(i.length){const e=Translator.trans("bulk_move.success.message",{},"sub_items"),i={locationLink:Translator.trans("bulk_move.success.link_to_location",{locationName:eZ.helpers.text.escapeHTML(t.ContentInfo.Content.Name),locationHref:this.props.generateLink(t.id)},"sub_items")};window.eZ.helpers.notification.showSuccessNotification(e,()=>{},i)}}toggleUdw(e){this.setState(()=>({isUdwOpened:e}))}closeUdw(){this.toggleUdw(!1)}onUdwConfirm([e]){this.closeUdw(),this.bulkMove(e)}renderUdw(){const{isUdwOpened:e}=this.state;if(!e)return null;const t=window.eZ.modules.UniversalDiscovery,{restInfo:i,parentLocationId:n,udwConfigBulkMoveItems:s}=this.props,{selectedItems:r}=this.state,l=[n,...[...r.values()].map(({location:e})=>e.id)],c=v({title:Translator.trans("udw.choose_location.title",{},"sub_items"),restInfo:i,onCancel:this.closeUdw,onConfirm:this.onUdwConfirm,canSelectContent:({item:e},t)=>{t(!l.includes(e.id))}},s);return o.a.createPortal(a.a.createElement(t,c),this.udwContainer)}onDeleteBtnClick(){this.toggleBulkDeletePopup(!0)}bulkDelete(){this.toggleBulkOperationStatusState(!0);const{restInfo:e}=this.props,{selectedItems:t}=this.state,i=[...t.values()].map(({location:e})=>e);Object(y.b)(e,i,this.afterBulkDelete.bind(this,t))}afterBulkDelete(e,t,i){const{totalCount:n}=this.state;if(this.refreshContentTree(),this.updateTotalCountState(n-t.length),this.deselectAllItems(),this.discardActivePageItems(),this.toggleBulkOperationStatusState(!1),i.length){const n=Translator.trans("bulk_delete.error.modal.table_title",{itemsCount:i.length},"sub_items"),a=Translator.trans("bulk_delete.error.message",{notDeletedCount:i.length,totalCount:t.length+i.length},"sub_items"),s={moreInformationLink:Translator.trans("bulk_delete.error.more_info",{},"sub_items")};this.handleBulkOperationFailedNotification(e,i,n,a,s)}else{const e=Translator.trans("bulk_delete.success.message",{},"sub_items");window.eZ.helpers.notification.showSuccessNotification(e)}}toggleBulkDeletePopup(e){this.setState(()=>({isBulkDeletePopupVisible:e}))}closeBulkDeletePopup(){this.toggleBulkDeletePopup(!1)}onBulkDeletePopupConfirm(){this.closeBulkDeletePopup(),this.bulkDelete()}handleBulkOperationFailedNotification(e,t,i,n,a){const{contentTypesMap:s}=this.state,o=t.map(({id:t})=>{const i=e.get(t),n=s[i.content.ContentType._href].identifier;return{contentTypeName:window.eZ.adminUiConfig.contentTypeNames[n],contentName:i.content.Name}});window.eZ.helpers.notification.showWarningNotification(n,e=>{const t=e.querySelector(".ez-notification-btn--show-modal");t&&t.addEventListener("click",this.props.showBulkActionFailedModal.bind(null,i,o))},a)}refreshContentTree(){document.body.dispatchEvent(new CustomEvent("ez-content-tree-refresh"))}renderConfirmationPopupFooter(){const e=Translator.trans("bulk_delete.popup.cancel",{},"sub_items"),t=Translator.trans("bulk_delete.popup.confirm",{},"sub_items");return a.a.createElement(n.Fragment,null,a.a.createElement("button",{onClick:this.closeBulkDeletePopup,type:"button",className:"btn btn-secondary btn--no m-sub-items__confirmation-modal-cancel-btn","data-dismiss":"modal"},e),a.a.createElement("button",{onClick:this.onBulkDeletePopupConfirm,type:"button",className:"btn btn-danger font-weight-bold btn--trigger"},t))}renderConfirmationPopup(){const{isBulkDeletePopupVisible:e}=this.state;if(!e)return null;const t=Translator.trans("bulk_delete.popup.message",{},"sub_items");return o.a.createPortal(a.a.createElement(u.a,{onClose:this.closeBulkDeletePopup,isVisible:e,isLoading:!1,size:"medium",footerChildren:this.renderConfirmationPopupFooter(),noHeader:!0},a.a.createElement("div",{className:"m-sub-items__confirmation-modal-body"},t)),this.bulkDeleteModalContainer)}changePage(e){this.updateListViewHeight(),this.setState(()=>({activePageIndex:e,activePageItems:null}))}getPageSelectedLocationsIds(){const{selectedItems:e,activePageItems:t}=this.state,i=[...e.keys()],n=[...t.map(e=>e.location.id)];return new Set(n.filter(e=>i.includes(e)))}renderExtraActions(e,t){const i=e.component;return a.a.createElement(i,C({key:t,className:"m-sub-items__action"},e.attrs))}renderPaginationInfo(){const{totalCount:e,activePageItems:t}=this.state,i=t?t.length:0,n=Translator.trans("viewing_message",{viewingCount:i,totalCount:e},"sub_items");return a.a.createElement("div",{className:"m-sub-items__pagination-info",dangerouslySetInnerHTML:{__html:n}})}renderPagination(){const{limit:e}=this.props,{totalCount:t}=this.state;if(t<=e)return null;const{activePageIndex:i,activePageItems:n,isDuringBulkOperation:s}=this.state,o=!!!n||s;return a.a.createElement(p.a,{proximity:1,itemsPerPage:e,activePageIndex:i,totalCount:t,onPageChange:this.changePage,disabled:o})}renderBulkMoveBtn(e){const t=Translator.trans("move_btn.label",{},"sub_items");return a.a.createElement(m.a,{disabled:e,onClick:this.onMoveBtnClick,label:t,type:"move"})}renderBulkDeleteBtn(e){const t=Translator.trans("trash_btn.label",{},"sub_items");return a.a.createElement(m.a,{disabled:e,onClick:this.onDeleteBtnClick,label:t,type:"trash"})}renderSpinner(){const{activePageItems:e}=this.state;if(!!e)return null;const{listViewHeight:t}=this.state,i={height:t&&t>90?t:90};return a.a.createElement("div",{style:i},a.a.createElement("div",{className:"m-sub-items__spinner-wrapper"},a.a.createElement(b.a,{name:"spinner",extraClasses:"m-sub-items__spinner ez-icon--medium ez-spin"})))}renderNoItems(){return this.state.totalCount?null:a.a.createElement(h.a,null)}renderListView(){const{activePageItems:e,sortClause:t,sortOrder:i}=this.state;if(!!!e)return null;const n=this.getPageSelectedLocationsIds();return a.a.createElement(d.a,{activeView:this.state.activeView,contentTypesMap:this.state.contentTypesMap,handleItemPriorityUpdate:this.handleItemPriorityUpdate,items:e,languages:this.props.languages,handleEditItem:this.props.handleEditItem,generateLink:this.props.generateLink,onItemSelect:this.toggleItemSelection,toggleAllItemsSelect:this.toggleAllPageItemsSelection,selectedLocationsIds:n,onSortChange:this.changeSorting,sortClause:t,sortOrder:i})}render(){const e=Translator.trans("items_list.title",{},"sub_items"),{selectedItems:t,activeView:i,totalCount:n,isDuringBulkOperation:s,activePageItems:o}=this.state,r=!t.size||!("table"===i)||!!!o;let l="m-sub-items__list";return s&&(l="".concat(l," ").concat(l,"--processing")),a.a.createElement("div",{className:"m-sub-items"},a.a.createElement("div",{className:"m-sub-items__header"},a.a.createElement("div",{className:"m-sub-items__title"},e," (",this.state.totalCount,")"),a.a.createElement("div",{className:"m-sub-items__actions"},this.props.extraActions.map(this.renderExtraActions),this.renderBulkMoveBtn(r),this.renderBulkDeleteBtn(r)),a.a.createElement(c.a,{onViewChange:this.switchView,activeView:i,isDisabled:!n})),a.a.createElement("div",{ref:this._refListViewWrapper,className:l},this.renderSpinner(),this.renderListView(),this.renderNoItems()),this.renderPaginationInfo(),this.renderPagination(),this.renderUdw(),this.renderConfirmationPopup())}}t.default=k,eZ.addConfig("modules.SubItems",k),k.propTypes={parentLocationId:l.a.number.isRequired,restInfo:l.a.shape({token:l.a.string.isRequired,siteaccess:l.a.string.isRequired}).isRequired,loadContentInfo:l.a.func,loadContentType:l.a.func,loadContentTypes:l.a.func,loadLocation:l.a.func,sortClauses:l.a.object,updateLocationPriority:l.a.func,activeView:l.a.string,extraActions:l.a.arrayOf(l.a.shape({component:l.a.func,attrs:l.a.object})),items:l.a.arrayOf(l.a.object),limit:l.a.number,offset:l.a.number,handleEditItem:l.a.func.isRequired,generateLink:l.a.func.isRequired,contentTypesMap:l.a.object,totalCount:l.a.number,languages:l.a.object,udwConfigBulkMoveItems:l.a.object.isRequired,showBulkActionFailedModal:l.a.func.isRequired},k.defaultProps={loadContentInfo:f.a,loadContentType:f.b,loadContentTypes:f.c,loadLocation:f.d,sortClauses:{},updateLocationPriority:f.e,activeView:"table",extraActions:[],languages:window.eZ.adminUiConfig.languages,items:[],limit:parseInt(window.eZ.adminUiConfig.subItems.limit,10),offset:0,contentTypesMap:{},totalCount:0}},function(e,t){e.exports=n},function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(1),o=i.n(s),r=i(22);const l=({onViewChange:e,activeView:t,isDisabled:i})=>{let n="c-view-switcher";i&&(n="".concat(n," ").concat(n,"--disabled"));const s=Translator.trans("switch_to_list_view.btn.label",{},"sub_items"),o=Translator.trans("switch_to_grid_view.btn.label",{},"sub_items");return a.a.createElement("div",{className:n},a.a.createElement(r.a,{id:"table",icon:"view-list",title:s,onClick:e,activeView:t,isDisabled:i}),a.a.createElement(r.a,{id:"grid",icon:"view-grid",title:o,onClick:e,activeView:t,isDisabled:i}))};l.propTypes={onViewChange:o.a.func.isRequired,activeView:o.a.string.isRequired,isDisabled:o.a.bool.isRequired},t.a=l},function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(1),o=i.n(s),r=i(2);const l=({id:e,icon:t,title:i,onClick:n,activeView:s,isDisabled:o})=>{const l={id:e,onClick:()=>n(e),className:"c-view-switcher-btn",title:i,tabIndex:"-1"},c={name:t,extraClasses:"ez-icon--secondary ez-icon--small"};return s===e&&(l.className="".concat("c-view-switcher-btn"," ").concat("c-view-switcher-btn","--active"),c.extraClasses="ez-icon--light ez-icon--small"),o&&(l.className="".concat(l.className," ").concat("c-view-switcher-btn","--disabled")),a.a.createElement("div",l,a.a.createElement(r.a,c))};l.propTypes={id:o.a.string.isRequired,activeView:o.a.string.isRequired,isDisabled:o.a.bool.isRequired,icon:o.a.string.isRequired,title:o.a.string.isRequired,onClick:o.a.func.isRequired},t.a=l},function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(1),o=i.n(s),r=i(16),l=i(27);const c={table:r.a,grid:l.a},d=e=>{const t=c[e.activeView];return a.a.createElement(t,e)};d.propTypes={activeView:o.a.string.isRequired,items:o.a.arrayOf(o.a.object),contentTypesMap:o.a.object.isRequired,handleItemPriorityUpdate:o.a.func.isRequired,languages:o.a.object.isRequired,onItemSelect:o.a.func.isRequired,toggleAllItemsSelect:o.a.func.isRequired,selectedLocationsIds:o.a.instanceOf(Set).isRequired,onSortChange:o.a.func.isRequired,sortClause:o.a.string.isRequired,sortOrder:o.a.string.isRequired},t.a=d},function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(1),o=i.n(s),r=i(2);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}class c extends n.PureComponent{constructor(e){super(e),this.storePriorityValue=this.storePriorityValue.bind(this),this.enablePriorityInput=this.enablePriorityInput.bind(this),this.handleSubmit=this.handleSubmit.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleEdit=this.handleEdit.bind(this),this.onSelectCheckboxChange=this.onSelectCheckboxChange.bind(this),this.setPriorityInputRef=this.setPriorityInputRef.bind(this),this._refPriorityInput=null,this.state={priorityValue:e.location.priority,priorityInputEnabled:!1,startingPriorityValue:e.location.priority}}enablePriorityInput(){this.setState(()=>({priorityInputEnabled:!0}))}handleCancel(e){e.preventDefault(),this.setState(e=>({priorityInputEnabled:!1,priorityValue:e.startingPriorityValue}))}handleSubmit(e){e.preventDefault(),this.props.onItemPriorityUpdate({location:this.props.location._href,priority:this._refPriorityInput.value}),this.setState(()=>({priorityValue:this._refPriorityInput.value,priorityInputEnabled:!1,startingPriorityValue:this._refPriorityInput.value}))}storePriorityValue(e){e.preventDefault(),this.setState(()=>({priorityValue:this._refPriorityInput.value}))}handleEdit(){this.props.handleEditItem(this.props.content)}setPriorityInputRef(e){this._refPriorityInput=e}renderPriorityCell(){const e={type:"number",defaultValue:this.state.priorityValue,onChange:this.storePriorityValue},t={},i={};return this.props.columnsVisibility.priority?(this.state.priorityInputEnabled||(e.disabled=!0,delete e.defaultValue,e.value=this.state.priorityValue,t.onClick=this.enablePriorityInput,t.className="c-table-view-item__inner-wrapper c-table-view-item__inner-wrapper--disabled",i.hidden=!0),a.a.createElement("td",{className:"c-table-view-item__cell c-table-view-item__cell--priority"},a.a.createElement("div",l({className:"c-table-view-item__priority-wrapper"},t),a.a.createElement("div",{className:"c-table-view-item__inner-wrapper c-table-view-item__inner-wrapper--input"},a.a.createElement("input",l({className:"c-table-view-item__priority-value",ref:this.setPriorityInputRef},e))),a.a.createElement("div",l({className:"c-table-view-item__priority-actions"},i),a.a.createElement("button",{type:"button",className:"c-table-view-item__btn c-table-view-item__btn--cancel",onClick:this.handleCancel},a.a.createElement(r.a,{name:"discard",extraClasses:"ez-icon--medium ez-icon--light"})),a.a.createElement("button",{type:"button",className:"c-table-view-item__btn c-table-view-item__btn--submit",onClick:this.handleSubmit},a.a.createElement(r.a,{name:"checkmark",extraClasses:"ez-icon--medium ez-icon--light"})))))):null}renderModifiedCell(){if(!this.props.columnsVisibility.modified)return null;const{content:e}=this.props,{formatShortDateTime:t}=window.eZ.helpers.timezone;return a.a.createElement("td",{className:"c-table-view-item__cell c-table-view-item__cell--modified"},a.a.createElement("div",{className:"c-table-view-item__text-wrapper"},t(new Date(e.lastModificationDate))))}renderContentTypeCell(){if(!this.props.columnsVisibility.contentType)return null;const{content:e,contentTypesMap:t}=this.props,i=Translator.trans("content_type.not_available.label",{},"sub_items"),n=t[e.ContentType._href],s=n?n.identifier:null,o=s?window.eZ.adminUiConfig.contentTypeNames[s]:i;return a.a.createElement("td",{className:"c-table-view-item__cell c-table-view-item__cell--content-type"},a.a.createElement("div",{className:"c-table-view-item__text-wrapper"},o))}renderTranslationsCell(){if(!this.props.columnsVisibility.translations)return null;const{content:e,languages:t}=this.props,i=e.CurrentVersion.Version.VersionInfo.VersionTranslationInfo.Language.map(e=>t.mappings[e.languageCode].name);return a.a.createElement("td",{className:"c-table-view-item__cell c-table-view-item__cell--translations"},i.map(this.renderTranslation))}renderTranslation(e,t){return a.a.createElement("span",{key:t,className:"c-table-view-item__translation"},e)}onSelectCheckboxChange(e){const{location:t,content:i,onItemSelect:n}=this.props;n({content:i,location:t},e.target.checked)}render(){const{content:e,location:t,isSelected:i,contentTypesMap:n,generateLink:s}=this.props,o=Translator.trans("edit_item_btn.label",{},"sub_items"),l=n[e.ContentType._href],c=l?l.identifier:null,d={className:"c-table-view-item__link c-table-view-item__text-wrapper",title:e.Name,href:s(t.id)},u=eZ.helpers.contentType.getContentTypeIconUrl(c);return a.a.createElement("tr",{className:"c-table-view-item"},a.a.createElement("td",{className:"c-table-view-item__cell c-table-view-item__cell--checkbox"},a.a.createElement("input",{type:"checkbox",checked:i,onChange:this.onSelectCheckboxChange})),a.a.createElement("td",{className:"c-table-view-item__cell c-table-view-item__cell--icon"},a.a.createElement(r.a,{customPath:u,extraClasses:"ez-icon--small"})),a.a.createElement("td",{className:"c-table-view-item__cell c-table-view-item__cell--name"},a.a.createElement("a",d,e.Name)),this.renderModifiedCell(),this.renderContentTypeCell(),this.renderPriorityCell(),this.renderTranslationsCell(),a.a.createElement("td",{className:"c-table-view-item__cell c-table-view-item__cell--actions"},a.a.createElement("span",{title:o,onClick:this.handleEdit,className:"c-table-view-item__btn c-table-view-item__btn--edit",tabIndex:"-1"},a.a.createElement("div",{className:"c-table-view-item__btn-inner"},a.a.createElement(r.a,{name:"edit",extraClasses:"ez-icon--medium"})))))}}t.a=c,c.propTypes={content:o.a.object.isRequired,location:o.a.object.isRequired,isSelected:o.a.bool.isRequired,contentTypesMap:o.a.object.isRequired,onItemPriorityUpdate:o.a.func.isRequired,handleEditItem:o.a.func.isRequired,generateLink:o.a.func.isRequired,languages:o.a.object.isRequired,onItemSelect:o.a.func.isRequired,columnsVisibility:o.a.object.isRequired}},function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(1),o=i.n(s),r=i(2),l=i(26),c=i(16);const d=200;class u extends n.Component{constructor(e){super(e),this.togglePanel=this.togglePanel.bind(this),this.hidePanel=this.hidePanel.bind(this),this._refTogglerButton=Object(n.createRef)(),this._refPanel=Object(n.createRef)(),this.state={isOpen:!1,buttonBottomDocumentOffset:null,panelHeight:null}}componentDidMount(){document.addEventListener("click",this.hidePanel,!1),this.setState(()=>({buttonBottomDocumentOffset:this.getBtnBottomDocumentOffset()}))}componentDidUpdate(){const{isOpen:e,panelHeight:t}=this.state;e&&null===t&&this.setState({panelHeight:this._refPanel.offsetHeight})}componentWillUnmount(){document.removeEventListener("click",this.hidePanel)}getBtnBottomDocumentOffset(){const e=this._refTogglerButton.current.getBoundingClientRect().top+window.scrollY;return document.documentElement.scrollHeight-e}hidePanel({target:e}){if(!this.state.isOpen)return;e.closest(".c-table-view-columns-toggler")||this.setState(()=>({isOpen:!1}))}togglePanel(){this.setState(e=>({isOpen:!e.isOpen}))}renderPanel(){if(!this.state.isOpen)return null;const{columnsVisibility:e,toggleColumnVisibility:t}=this.props,{buttonBottomDocumentOffset:i,panelHeight:n}=this.state,s=n||d,o={className:"c-table-view-columns-toggler__panel",ref:this._refPanel};return i<s&&(o.className="".concat(o.className," ").concat(o.className,"--above-btn")),a.a.createElement("div",o,a.a.createElement("ul",{className:"c-table-view-columns-toggler__list"},Object.entries(e).map(([e,i])=>{const n=c.b[e];return a.a.createElement(l.a,{key:e,label:n,columnKey:e,isColumnVisible:i,toggleColumnVisibility:t})})))}render(){return a.a.createElement("div",{className:"c-table-view-columns-toggler"},a.a.createElement("button",{ref:this._refTogglerButton,type:"button",className:"btn btn-dark c-table-view-columns-toggler__btn",onClick:this.togglePanel},a.a.createElement(r.a,{name:"filters",extraClasses:"ez-icon--small ez-icon--light"})),this.renderPanel())}}t.a=u,u.propTypes={columnsVisibility:o.a.object.isRequired,toggleColumnVisibility:o.a.func.isRequired}},function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(1),o=i.n(s);const r=({label:e,isColumnVisible:t,toggleColumnVisibility:i,columnKey:n})=>a.a.createElement("li",{className:"c-table-view-columns-toggler-list-element",onClick:()=>i(n)},a.a.createElement("div",{className:"form-check form-check-inline"},a.a.createElement("input",{className:"form-check-input",type:"checkbox",checked:t,readOnly:!0}),a.a.createElement("label",{className:"c-table-view-columns-toggler-list-element__label form-check-label"},e)));r.propTypes={label:o.a.string.isRequired,columnKey:o.a.string.isRequired,isColumnVisible:o.a.bool.isRequired,toggleColumnVisibility:o.a.func.isRequired},t.a=r},function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(1),o=i.n(s),r=i(28);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e}).apply(this,arguments)}const c=e=>{const{items:t,contentTypesMap:i,generateLink:n}=e;return a.a.createElement("div",{className:"c-grid-view"},t.map(e=>a.a.createElement(r.a,l({key:e.location.id},e,{contentTypesMap:i,generateLink:n}))))};c.propTypes={items:o.a.arrayOf(o.a.object),contentTypesMap:o.a.object,generateLink:o.a.func.isRequired},t.a=c},function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(1),o=i.n(s),r=i(2);const l=({content:e,location:t,generateLink:i,contentTypesMap:n})=>{const s=e.CurrentVersion.Version.Fields.field.find(e=>"ezimage"===e.fieldTypeIdentifier),o=s&&s.fieldValue&&s.fieldValue.uri&&s.fieldValue.path,l=n?n[e.ContentType._href]:null,c=l?l.identifier:null,d=eZ.helpers.contentType.getContentTypeIconUrl(c);let u=a.a.createElement("div",{className:"".concat("c-grid-view-item__image"," ").concat("c-grid-view-item__image","--none")},a.a.createElement(r.a,{customPath:d,extraClasses:"ez-icon--extra-large"})),m="";return o&&(u=a.a.createElement("img",{className:"c-grid-view-item__image",src:s.fieldValue.uri,alt:"".concat(s.fieldValue.path)}),m=a.a.createElement("div",{className:"c-grid-view-item__content-type"},a.a.createElement(r.a,{customPath:d,extraClasses:"ez-icon--small"}))),a.a.createElement("a",{className:"c-grid-view-item",href:i(t.id)},m,a.a.createElement("div",{className:"c-grid-view-item__image-wrapper"},u),a.a.createElement("div",{className:"c-grid-view-item__title"},e.Name))};l.propTypes={content:o.a.object.isRequired,location:o.a.object.isRequired,contentTypesMap:o.a.object.isRequired,generateLink:o.a.func.isRequired},t.a=l},function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(1),o=i.n(s),r=i(2);const l=e=>{const{disabled:t,onClick:i,label:n,type:s}=e,o={className:"".concat("c-action-btn"),title:n,tabIndex:"-1",onClick:()=>{t||i()}};return o.className=t?"".concat(o.className," ").concat("c-action-btn","--disabled"):o.className,o.className=s?"".concat(o.className," ").concat("c-action-btn","--").concat(s):o.className,a.a.createElement("div",o,a.a.createElement(r.a,{name:s,extraClasses:"ez-icon--light ez-icon--medium"}))};l.propTypes={label:o.a.string.isRequired,disabled:o.a.bool.isRequired,type:o.a.string.isRequired,onClick:o.a.func.isRequired},t.a=l},function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(1),o=i.n(s),r=i(31);const l=({totalCount:e,itemsPerPage:t,proximity:i,activePageIndex:n,onPageChange:s,disabled:o})=>{const l=Math.ceil(e/t),c=Translator.trans("pagination.back",{},"sub_items"),d=Translator.trans("pagination.next",{},"sub_items"),u=n-1,m=n+1,p=0===n,h=n+1===l,b=(({proximity:e,activePageIndex:t,pagesCount:i})=>{const n=[];let a=!1;for(let s=1;s<=i;s++)1===s||s===i||s>=t+1-e&&s<=t+1+e?(n.push(s),a=!1):a||(n.push("..."),a=!0);return n})({proximity:i,activePageIndex:n,pagesCount:l}).map((e,t)=>{if("..."===e)return a.a.createElement(r.a,{key:"dots-".concat(t),label:"...",disabled:!0});const i=e===n+1?"active":"",l=""+e;return a.a.createElement(r.a,{key:e,pageIndex:e-1,label:l,additionalClasses:i,onPageChange:s,disabled:o})});return a.a.createElement("ul",{className:"c-pagination pagination row justify-content-center"},a.a.createElement(r.a,{pageIndex:u,label:c,additionalClasses:"prev",disabled:p||o,onPageChange:s}),b,a.a.createElement(r.a,{pageIndex:m,label:d,additionalClasses:"next",disabled:h||o,onPageChange:s}))};l.propTypes={proximity:o.a.number.isRequired,itemsPerPage:o.a.number.isRequired,activePageIndex:o.a.number.isRequired,totalCount:o.a.number.isRequired,onPageChange:o.a.func.isRequired,disabled:o.a.bool},t.a=l},function(e,t,i){"use strict";var n=i(0),a=i.n(n),s=i(1),o=i.n(s);const r=({label:e,disabled:t,additionalClasses:i,onPageChange:n,pageIndex:s})=>{let o="c-pagination-button page-item ".concat(i);return o=t?"".concat(o," disabled"):o,a.a.createElement("li",{className:o},a.a.createElement("button",{className:"page-link",onClick:()=>{!t&&Number.isInteger(s)&&n(s)},type:"button"},e))};r.propTypes={label:o.a.string.isRequired,disabled:o.a.bool,onPageChange:o.a.func,pageIndex:o.a.number,additionalClasses:o.a.string},r.defaultProps={disabled:!1,additionalClasses:"",onPageChange:()=>{}},t.a=r},function(e,t,i){"use strict";var n=i(0),a=i.n(n);t.a=(()=>{const e=Translator.trans("no_items.message",{},"sub_items");return a.a.createElement("div",{className:"c-no-items"},e)})},function(e,t,i){"use strict";var n=i(3);function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){s(e,t,i[t])})}return e}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const o={Accept:"application/vnd.ez.api.View+json; version=1.1","Content-Type":"application/vnd.ez.api.ViewInput+json; version=1.1"};t.d=(({token:e,siteaccess:t},{locationId:i=2,limit:s=10,offset:r=0,sortClauses:l},c)=>{const d=JSON.stringify({ViewInput:{identifier:"subitems-load-location-".concat(i),public:!1,LocationQuery:{Criteria:{},FacetBuilders:{},SortClauses:l,Filter:{ParentLocationIdCriterion:i},limit:s,offset:r}}}),u=new Request("/api/ezp/v2/views",{method:"POST",headers:a({},o,{"X-Siteaccess":t,"X-CSRF-Token":e}),body:d,mode:"cors",credentials:"same-origin"});fetch(u).then(n.c).then(c).catch(()=>window.eZ.helpers.notification.showErrorNotification("Cannot load location"))});t.a=(({token:e,siteaccess:t},i,s)=>{const r=i.join(),l=JSON.stringify({ViewInput:{identifier:"subitems-load-content-info-".concat(r),public:!1,ContentQuery:{Criteria:{},FacetBuilders:{},SortClauses:{},Filter:{ContentIdCriterion:"".concat(r)},limit:i.length,offset:0}}}),c=new Request("/api/ezp/v2/views",{method:"POST",headers:a({},o,{"X-Siteaccess":t,"X-CSRF-Token":e}),body:l,mode:"cors",credentials:"same-origin"});fetch(c).then(n.c).then(s).catch(()=>window.eZ.helpers.notification.showErrorNotification("Cannot load content info"))});t.c=(({token:e,siteaccess:t},i)=>{const a=new Request("/api/ezp/v2/content/types",{method:"GET",headers:{Accept:"application/vnd.ez.api.ContentTypeInfoList+json","X-Siteaccess":t,"X-CSRF-Token":e},mode:"cors",credentials:"same-origin"});fetch(a).then(n.c).then(i).catch(()=>window.eZ.helpers.notification.showErrorNotification("Cannot load content types"))});t.b=((e,{token:t,siteaccess:i},a)=>{const s=new Request(e,{method:"GET",headers:{Accept:"application/vnd.ez.api.ContentType+json","X-Siteaccess":i,"X-CSRF-Token":t},mode:"cors",credentials:"same-origin"});fetch(s).then(n.c).then(a).catch(()=>window.eZ.helpers.notification.showErrorNotification("Cannot load a content type"))});t.e=(({priority:e,location:t,token:i,siteaccess:a},s)=>{const o=new Request(t,{method:"POST",headers:{Accept:"application/vnd.ez.api.Location+json","Content-Type":"application/vnd.ez.api.LocationUpdate+json","X-Siteaccess":a,"X-CSRF-Token":i,"X-HTTP-Method-Override":"PATCH"},credentials:"same-origin",mode:"cors",body:JSON.stringify({LocationUpdate:{priority:e,sortField:"PATH",sortOrder:"ASC"}})});fetch(o).then(n.c).then(s).catch(()=>window.eZ.helpers.notification.showErrorNotification("An error occurred while updating location priority"))})},function(e,t,i){"use strict";var n=i(3);function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const s={Accept:"application/vnd.ez.api.BulkOperationResponse+json","Content-Type":"application/vnd.ez.api.BulkOperation+json"},o=(e,t,i,n)=>{const a=r(t,i);c(e,a,l.bind(null,t,n))};t.a=o;t.b=((e,t,i)=>{o(e,t,"/api/ezp/v2/content/trash",i)});const r=(e,t)=>{const i={};return e.forEach(e=>{i[e.id]={uri:e._href,method:"MOVE",headers:{Destination:t}}}),i},l=(e,t,i)=>{const{operations:n}=i.BulkOperationResponse,a=Object.entries(n).reduce((t,[i,n])=>{const a=e.find(e=>e.id===parseInt(i,10));return 200<=n.statusCode&&n.statusCode<=299?t.success.push(a):t.fail.push(a),t},{success:[],fail:[]});t(a.success,a.fail)},c=({token:e,siteaccess:t},i,o)=>{const r=new Request("/api/ezp/v2/bulk",{method:"POST",headers:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){a(e,t,i[t])})}return e}({},s,{"X-Siteaccess":t,"X-CSRF-Token":e}),body:JSON.stringify({bulkOperations:{operations:i}}),mode:"same-origin",credentials:"same-origin"});fetch(r).then(n.c).then(o).catch(()=>{const e=Translator.trans("bulk_request.error.message",{},"sub_items");window.eZ.helpers.notification.showErrorNotification(e)})}}]).default});
//# sourceMappingURL=SubItems.module.js.map